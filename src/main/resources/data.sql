DROP TABLE IF EXISTS Users, Exchanges, Stocks, Rates, Dividends, Statistics, Transactions;

CREATE TABLE Users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255),
    password VARCHAR(255),
    first_name VARCHAR(255),
    last_name VARCHAR(255),
    image_path VARCHAR(255),
    disp_curr CHAR(3)
);

INSERT INTO Users (username, password, first_name, last_name, image_path, disp_curr)
VALUES
    ('ccyh_97', 'password123', 'Caleb', 'Chan', NULL, 'SGD'),
    ('prataboy', 'password123', 'Kelvin', 'Lim', NULL, 'SGD'),
    ('moneyizlife', 'password123', 'Christopher', 'Goh', NULL, 'USD');

CREATE TABLE Exchanges (
    exchange_id INT AUTO_INCREMENT PRIMARY KEY,
    exchange VARCHAR(255),
    country_code CHAR(2),
    suffix VARCHAR(10)
);

INSERT INTO Exchanges (exchange, country_code, suffix)
VALUES
('NASDAQ', 'US', NULL),
('NYSE', 'US',  NULL),
('SGX', 'SG', '.SI'),
('LSE', 'UK', '.L');

CREATE TABLE Stocks (
    stock_id INT AUTO_INCREMENT PRIMARY KEY,
    stock_ticker VARCHAR(10),
    stock_name VARCHAR(255),
    stock_type VARCHAR(10),
    exchange_id INT,
    last_price DECIMAL(38, 20),
    base_currency CHAR(3),
    div_ind CHAR(1),
    delist_ind CHAR(1)
);

INSERT INTO Stocks (stock_ticker, stock_name, stock_type, exchange_id, last_price, base_currency, div_ind, delist_ind)
VALUES
    ('D05', 'DBS Group Holdings Ltd', 'Equity', 3, 35.83, 'SGD', 'Y', 'N'),
    ('CSPX', 'iShares Core S&P 500 ETF', 'ETF', 4, 551.65, 'USD', 'N', 'N'),
    ('AAPL', 'Apple Inc.', 'Equity', 1, 172.28, 'USD', 'Y', 'N');

CREATE TABLE Rates (
    rate_id INT AUTO_INCREMENT PRIMARY KEY,
    rate_name VARCHAR(255),
    rate DECIMAL(38, 20)
);

INSERT INTO Rates (rate_name, rate)
VALUES
    ('USD/SGD', 1.3483),
    ('SGD/USD', 0.7416747015);

CREATE TABLE Dividends (
    dividend_id INT AUTO_INCREMENT PRIMARY KEY,
    stock_id INT,
    exchange_id INT,
    ex_date DATE,
    pay_date DATE,
    payout DECIMAL(38,20)
);

INSERT INTO Dividends (stock_id, exchange_id, ex_date, pay_date, payout)
VALUES
    (1, 3, '2024-04-05', '2024-04-19', 0.54),
    (1, 3, '2023-11-14', '2023-11-27', 0.48),
    (1, 3, '2023-08-11', '2023-08-24', 0.48),
    (1, 3, '2023-05-09', '2023-05-22', 0.42),
    (1, 3, '2023-04-10', '2023-04-21', 0.5),
    (1, 3, '2023-04-10', '2023-04-21', 0.42),
    (1, 3, '2022-11-11', '2022-11-24', 0.36),
    (1, 3, '2022-08-15', '2022-08-26', 0.36),
    (1, 3, '2022-05-11', '2022-05-25', 0.36),
    (1, 3, '2022-04-08', '2022-04-22', 0.36),
    (1, 3, '2021-11-12', '2021-11-26', 0.33),
    (1, 3, '2021-08-13', '2021-08-26', 0.33),
    (1, 3, '2021-05-10', '2021-06-25', 0.18),
    (1, 3, '2021-04-07', '2021-05-24', 0.18),
    (1, 3, '2020-11-12', '2020-12-29', 0.18),
    (1, 3, '2020-08-14', '2020-10-05', 0.18),
    (1, 3, '2020-05-12', '2020-05-26', 0.33),
    (1, 3, '2020-05-12', '2020-05-26', 0.33),
    (1, 3, '2019-11-18', '2019-11-29', 0.3),
    (1, 3, '2019-08-05', '2019-08-20', 0.3),
    (1, 3, '2019-05-17', '2019-05-31', 0.3),
    (1, 3, '2019-05-02', '2019-05-17', 0.6),
    (1, 3, '2017-05-04', '2017-06-20', 0.3),
    (1, 3, '2016-08-15', '2016-09-29', 0.3),
    (1, 3, '2016-05-05', '2016-06-20', 0.3),
    (1, 3, '2015-07-31', '2015-09-18', 0.3),
    (1, 3, '2015-04-27', '2015-06-12', 0.3),
    (1, 3, '2014-08-13', '2014-09-26', 0.28),
    (1, 3, '2014-05-12', '2014-06-26', 0.3),
    (1, 3, '2013-08-15', '2013-09-30', 0.28),
    (1, 3, '2013-05-13', '2013-06-27', 0.28),
    (1, 3, '2012-08-15', '2012-10-01', 0.28),
    (1, 3, '2012-05-09', '2012-06-29', 0.28),
    (1, 3, '2011-08-08', '2011-09-30', 0.28),
    (1, 3, '2011-05-12', '2011-07-05', 0.28),
    (1, 3, '2010-08-20', '2010-10-13', 0.14),
    (1, 3, '2010-05-20', '2010-07-08', 0.14),
    (1, 3, '2010-05-20', '2010-07-08', 0.14),
    (1, 3, '2009-11-18', '2009-12-04', 0.14),
    (1, 3, '2009-08-20', '2009-09-04', 0.14),
    (1, 3, '2009-05-20', '2009-06-04', 0.14),
    (1, 3, '2009-04-14', '2009-04-29', 0.14),
    (1, 3, '2008-11-19', '2008-12-04', 0.2),
    (1, 3, '2008-08-19', '2008-09-03', 0.2),
    (1, 3, '2008-05-20', '2008-06-04', 0.2),
    (1, 3, '2008-04-07', '2008-04-22', 0.2),
    (1, 3, '2007-11-07', '2007-11-26', 0.2),
    (1, 3, '2007-08-07', '2007-08-23', 0.2),
    (1, 3, '2007-05-16', '2007-06-01', 0.2),
    (1, 3, '2007-04-10', '2007-04-25', 0.2),
    (1, 3, '2007-04-10', '2007-04-25', 0.05),
    (1, 3, '2006-11-08', '2006-11-23', 0.17),
    (1, 3, '2006-08-10', '2006-08-25', 0.17),
    (1, 3, '2006-05-11', '2006-05-26', 0.17),
    (1, 3, '2006-04-04', '2006-04-20', 0.17),
    (1, 3, '2005-11-11', '2005-11-28', 0.15),
    (1, 3, '2005-08-11', '2005-08-26', 0.15),
    (1, 3, '2005-05-19', '2005-06-07', 0.11),
    (1, 3, '2005-05-05', '2005-05-20', 0.22),
    (1, 3, '2004-08-12', '2004-08-27', 0.18),
    (1, 3, '2004-05-04', '2004-05-19', 0.16),
    (1, 3, '2003-08-13', '2003-08-28', 0.14),
    (1, 3, '2003-04-24', '2003-05-12', 0.16),
    (1, 3, '2002-08-01', '2002-08-19', 0.14),
    (1, 3, '2002-05-03', '2002-05-20', 0.16),
    (1, 3, '2001-08-02', '2001-08-20', 0.14),
    (1, 3, '2001-05-16', '2001-05-31', 0.15),
    (1, 3, '2001-05-16', '2001-05-31', 0.16),
    (1, 3, '2000-08-08', '2000-08-24', 0.14),
    (1, 3, '2000-05-17', '2000-06-02', 0.16),
    (1, 3, '1999-08-06', '1999-08-25', 0.09),
    (1, 3, '1999-06-22', '1999-07-09', 0.09),
    (1, 3, '1998-08-20', '1998-09-08', 0.09),
    (1, 3, '1998-05-12', '1998-05-29', 0.09),
    (1, 3, '1997-08-14', '1997-09-02', 0.09),
    (1, 3, '1997-05-13', '1997-06-02', 0.08),
    (1, 3, '1996-08-19', '1996-09-05', 0.08),
    (1, 3, '1996-05-14', '1996-06-03', 0.08),
    (1, 3, '1995-08-21', '1995-09-05', 0.08),
    (1, 3, '1995-04-26', '1995-05-16', 0.08),
    (1, 3, '1994-09-07', '1994-09-22', 0.08),
    (1, 3, '1994-05-04', '1994-05-16', 0.13),
    (1, 3, '1993-09-21', '1993-10-07', 0.08),
    (1, 3, '1993-04-26', '1993-05-17', 0.08),
    (1, 3, '1992-08-31', '1992-09-18', 0.08),
    (1, 3, '1992-04-21', '1992-05-11', 0.08),
    (3, 1, '2024-02-09', '2024-02-15', 0.2400),
    (3, 1, '2023-11-10', '2023-11-16', 0.2400),
    (3, 1, '2023-08-11', '2023-08-17', 0.2400),
    (3, 1, '2023-05-12', '2023-05-18', 0.2400),
    (3, 1, '2023-02-10', '2023-02-16', 0.2300),
    (3, 1, '2022-11-04', '2022-11-10', 0.2300),
    (3, 1, '2022-08-05', '2022-08-11', 0.2300),
    (3, 1, '2022-05-06', '2022-05-12', 0.2300),
    (3, 1, '2022-02-04', '2022-02-10', 0.2200),
    (3, 1, '2021-11-05', '2021-11-11', 0.2200),
    (3, 1, '2021-08-06', '2021-08-12', 0.2200),
    (3, 1, '2021-05-07', '2021-05-13', 0.2200),
    (3, 1, '2021-02-05', '2021-02-11', 0.2050),
    (3, 1, '2020-11-06', '2020-11-12', 0.2050),
    (3, 1, '2020-08-07', '2020-08-13', 0.2050),
    (3, 1, '2020-05-08', '2020-05-14', 0.2050),
    (3, 1, '2020-02-07', '2020-02-13', 0.1925),
    (3, 1, '2019-11-07', '2019-11-14', 0.1925),
    (3, 1, '2019-08-09', '2019-08-15', 0.1925),
    (3, 1, '2019-05-10', '2019-05-16', 0.1925),
    (3, 1, '2019-02-08', '2019-02-14', 0.1825),
    (3, 1, '2018-11-08', '2018-11-15', 0.1825),
    (3, 1, '2018-08-10', '2018-08-16', 0.1825),
    (3, 1, '2018-05-11', '2018-05-17', 0.1825),
    (3, 1, '2018-02-09', '2018-02-15', 0.1575),
    (3, 1, '2017-11-10', '2017-11-16', 0.1575),
    (3, 1, '2017-08-10', '2017-08-17', 0.1575),
    (3, 1, '2017-05-11', '2017-05-18', 0.1575),
    (3, 1, '2017-02-09', '2017-02-16', 0.1425),
    (3, 1, '2016-11-03', '2016-11-10', 0.1425),
    (3, 1, '2016-08-04', '2016-08-11', 0.1425),
    (3, 1, '2016-05-05', '2016-05-12', 0.1425),
    (3, 1, '2016-02-04', '2016-02-11', 0.1300),
    (3, 1, '2015-11-05', '2015-11-12', 0.1300),
    (3, 1, '2015-08-06', '2015-08-13', 0.1300),
    (3, 1, '2015-05-07', '2015-05-14', 0.1300),
    (3, 1, '2015-02-05', '2015-02-12', 0.1175),
    (3, 1, '2014-11-06', '2014-11-13', 0.1175),
    (3, 1, '2014-08-07', '2014-08-14', 0.1175),
    (3, 1, '2014-05-08', '2014-05-15', 0.1175),
    (3, 1, '2014-02-06', '2014-02-13', 0.1089),
    (3, 1, '2013-11-06', '2013-11-14', 0.1089),
    (3, 1, '2013-08-08', '2013-08-15', 0.1089),
    (3, 1, '2013-05-09', '2013-05-16', 0.1089),
    (3, 1, '2013-02-07', '2013-02-14', 0.0946),
    (3, 1, '2012-11-07', '2012-11-15', 0.0946),
    (3, 1, '2012-08-09', '2012-08-16', 0.0946),
    (3, 1, '1995-11-21', '1995-12-15', 0.0011),
    (3, 1, '1995-08-16', '1995-09-08', 0.0011),
    (3, 1, '1995-05-26', '1995-06-23', 0.0011);

CREATE TABLE Statistics (
    statistic_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    stock_id INT,
    total_units DECIMAL(38,20),
    total_cost DECIMAL(38,20),
    total_value DECIMAL(38,20),
    realized_profits DECIMAL(38,20),
    unrealized_profits DECIMAL(38,20),
    dividends_earned DECIMAL(38,20),
    total_profits DECIMAL(38,20)
);

CREATE TABLE Transactions (
    transaction_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    transaction_date DATE,
    transaction_type CHAR(4),
    stock_id INT,
    units VARCHAR(50),
    unit_price DECIMAL(38, 20),
    fees DECIMAL(38, 20),
    currency CHAR(3)
);

INSERT INTO Transactions (user_id, transaction_date, transaction_type, stock_id, units, unit_price, fees, currency)
VALUES
    (1, '2023-06-15', 'Buy', 1, 443.44, 33.21, 1.44, 'SGD'),
    (1, '2023-10-22', 'Sell', 1, 10.24, 33.21, 1.44, 'SGD'),
    (1, '2023-07-25', 'Buy', 2, 15.763, 539.66, 1.51, 'USD'),
    (1, '2023-01-11', 'Buy', 3, 23.44211, 195.33, 3.22, 'USD');
